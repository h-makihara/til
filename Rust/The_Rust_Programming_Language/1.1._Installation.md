# インストール
Rustをインストールするはじめの一歩です。  
Rustのバージョンと関連ツールを管理するコマンドラインツールである、"rustup"を通じてRustをダウンロードします。  
ダウンロードにはインターネットへ接続できている必要があります。  


> Note: もしなにかの理由でrustupを使いたくないなら、[Other Rust Installation Methods
](https://forge.rust-lang.org/infra/other-installation-methods.html)ここを見てね。

この後の手順では、最新の安定版のRustコンパイラをインストールします。  
Rustの安定性が保証されているため、この本のすべての例は、新しいRustのバージョンでも、コンパイルすることができます。  
RustはしばしばエラーメッセージとWarningを改善するため、バージョンの差で出力はほんの少し異なる場合があります。  
言い換えるならば、これらの手順でインストールした新しい安定版のRustでは、この本の内容で期待通りに動作するはずです。  

> コマンドラインの表記  
> この本を通して、ターミナルで実行するコマンドを提示します。  
> ターミナルで入力してほしい一行は、"\$"ですべて始まります。  
> ただし、"\$"の文字を入力する必要はありません。  
> "\$"は、それぞれのコマンドを最初を示すための表示です。
> 逆に、"\$"で始まらない行は通常、その前のコマンドでの出力を表します。  
> 更に、PowerShell固有の例では"\$"ではなく、"\>"を使います。

## LinuxまたはmacOSにrustupをインストールする
LinuxまたはmacOSを使用している場合、ターミナルを起動し、
以下のコマンドを実行してください  

``` bash
$ curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh
```

このコマンドは、スクリプトをダウンロードし、Rustの最新安定版をインストールするためのrustupツールのインストールを開始します。  
パスワード入力を促されるプロンプトが表示されると思います。  
インストールに成功すると、以下のような行が表示されます。
```
Rust is installed now. Great!
```
リンカーも必要になります。Rustがそのコンパイルされた出力を１つのファイルに結合するためのプログラムです。  
それはもう既にインストール済みかもしれません。  
もしリンカーが実行できないとエラーが出たら、Cコンパイラをインストールする必要があります。  
通常はリンカーに含まれています。  
いくつかのRustの共通パッケージはC言語のコードに依存しており、Cコンパイラが必要です。  

macOSの場合、Cコンパイラは以下のコマンドで入手可能です。  
``` shell
$ xcode-select --install
```
Linusユーザは一般的に、GCCかC言語をディストリビューションのドキュメントに従いインストールします。  
例えばUbuntuの場合、build-essentialパッケージでインストールされます。  

## Windowsにrustupをインストールする

Windowsの場合、[https://www.rust-lang.org/tools/install](https://www.rust-lang.org/tools/install)にアクセスし、Rustのインストール手順に従ってください。  
インストールの中のポイントで、Visual Studio 2013以降のMSVC build toolsが必要だというメッセージが表示されます。  
ビルドツールを入手するには、Visual Studio 2022をインストールする必要があります。  
どのワークロードをインストールするか尋ねられた場合、次を含めます。  
- C++デスクトップ開発  
- Windows 10または11 SDK
- 他の選択した言語パックとともに「英語の言語パックコンポーネント」  

これ以降、'cmd.exe'とPowerShellの両方で動作するコマンドを使用します。  
特別違いがあったら、どちらを使うか説明します。  

## トラブルシューティング
Rustが正しくインストールされたかどうか調べるには、シェルを開いて次の行を入力してください  
``` shell
$ rustc --version
```
リリース済みの最新安定版のバージョン番号とコミットハッシュ値、コミット日が以下のように出力されます。
```
rustc x.y.z (abcabcabc yyyy-mm-dd)
```

もしこの情報が出力されたなら、Rustのインストールに成功しています！  
もし、情報が出力されなかったなら、システム環境変数の'\%PATH\%'を以下のコマンドで確認してください。  
WindowsのCMDの場合：  
``` cmd
> echo %PATH%
``` 
PowerShellの場合：  
``` powershell
> echo $env:Path
``` 
LinuxやmacOSの場合：  
``` shell
$ echo $PATH
```
もし、環境変数に含まれているにも関わらずRustが動かない場合、助けになる場所がいくつかあります。  
[the commyinity page](https://www.rust-lang.org/community)で、（私達が自分たちで呼んでいるニックネームの）Rustaceansと連絡を取る方法を見つけてください。  
## アップデートとアンインストール
一度Rustを'rustup'でインストールしたのであれば、新しいリリースのバージョンへのアップデートは簡単です。  
シェルで、以下のアップデートスクリプトを実行してください。  
``` bash
$ rustup update
```
Rustと'rustup'をアンインストールする場合、シェルで以下のアンインストールスクリプトを実行してください。  
``` bash
$ rustup self uninstall
```

## ローカルのドキュメンテーション
Rustをインストールすると、ローカルにドキュメンテーションのコピーが含まれています。  
それをオフラインで読むことができます。  
``` rustup doc ```を実行すると、ローカルドキュメンテーションをブラウザで開くことができます。  

標準ライブラリで提供された関数や型がなにかや、それをどうつかうのかわからない場合、APIドキュメンテーションを使って見つけてみてください！